webpackJsonp([5],{"3yK/":function(t,e,a){"use strict";var r=a("E6Sy");e.a=[{prop:"title",label:"问题"},{prop:"content",label:"回答"},{prop:"sort",label:"排序"},{prop:"create_time",label:"创建时间",formatter:function(t,e,a){return r.a.dateFormat(1e3*parseInt(a),"yyyy-MM-dd hh:mm:ss")}}]},"6WvH":function(t,e,a){"use strict";e.a={pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},questionStatus:[{value:"0",label:"全部"},{value:"1",label:"上架中"},{value:"2",label:"下架中"}],incomeStatus:[{value:"0",label:"全部"},{value:"1",label:"充值"},{value:"2",label:"提现"},{value:"3",label:"答题成功奖励"},{value:"4",label:"退款到余额"}],complainStatus:[{value:"0",label:"全部"},{value:"1",label:"诱导分享"},{value:"2",label:"欺诈"}],answerStatus:[{value:"0",label:"全部"},{value:"1",label:"进行中"},{value:"2",label:"已完成"},{value:"2",label:"已关闭"}]}},"8VyN":function(t,e,a){"use strict";var r=a("Xxa5"),i=a.n(r),n=a("woOf"),s=a.n(n),o=a("exGp"),l=a.n(o),c=a("Dd8w"),u=a.n(c),m=a("KofW"),p=a("BYdl"),f=a("3yK/"),d=a("cxve");e.a={data:function(){return{pending:!1,totals:1,listData:[],listFormatter:f.a,dialogFormVisible:!1,params:null,form:{title:"",content:"",sort:""},showType:""}},computed:u()({},Object(d.d)({})),beforeRouteEnter:function(t,e,a){a(function(e){e.listRender({page:t.query.p||1})})},beforeRouteUpdate:function(t,e,a){this.listRender({page:t.query.p}),a()},methods:u()({},Object(d.a)(["problemList","problemCreate","problemEdit","problemDelete"]),{listRender:function(t){var e=this;return l()(i.a.mark(function a(){var r;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.problemList(s()({},t,e.params));case 2:r=a.sent,e.listData=r.data,e.totals=r.paging?+r.paging.total:1;case 5:case"end":return a.stop()}},a,e)}))()},pageChange:function(t){this.$router.push({name:"problems",query:{p:t}})},search:function(t){this.params=t,this.$router.push({name:"problems",query:{p:1,t:(new Date).getTime()}})},addProblem:function(){this.showType="1",this.dialogFormVisible=!0},editProblem:function(t){this.showType="2",this.form={title:t.title,content:t.content,sort:t.sort,id:t.id},this.dialogFormVisible=!0},deleteProblem:function(t){var e=this;this.$confirm("确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.problemDelete({id:t}).then(function(){e.listRender({page:e.$route.query.p}),e.$message({type:"success",message:"删除成功"})})}).catch(function(){})},cancelProblem:function(){this.form={title:"",content:"",sort:""},this.dialogFormVisible=!1},submitProblem:function(){var t=this;return this.form.title?this.form.content?void("1"===this.showType?this.problemCreate(this.form).then(function(){t.listRender({page:t.$route.query.p}),t.cancelProblem(),t.$message({message:"添加成功",type:"success"})}):this.problemEdit(this.form).then(function(){t.listRender({page:t.$route.query.p}),t.cancelProblem(),t.$message({message:"编辑成功",type:"success"})})):void this.$message({message:"请填写回答",type:"warning"}):void this.$message({message:"请填写问题",type:"warning"})}}),components:{query:m.a,pagination:p.a}}},"8rMT":function(t,e,a){e=t.exports=a("FZ+f")(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"index.vue",sourceRoot:""}])},BYdl:function(t,e,a){"use strict";var r=a("CwAM"),i=a("mB4h"),n=a("VU/8"),s=n(r.a,i.a,!1,null,null,null);e.a=s.exports},CwAM:function(t,e,a){"use strict";e.a={props:{totalPage:{default:1,type:Number}},data:function(){return{timer:null}},methods:{handleCurrentChange:function(t){var e=this;if(this.$route.query.p==t)return!1;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){clearTimeout(e.timer),e.$emit("pageChange",t)},500)}}}},GnWc:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"topbar"},[a("div",{staticClass:"topbar-form"},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:t.params.title,callback:function(e){t.$set(t.params,"title",e)},expression:"params.title"}},[a("template",{slot:"prepend"},[t._v("问题")])],2)],1),t._v(" "),a("div",{staticClass:"topbar-form"},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:t.params.content,callback:function(e){t.$set(t.params,"content",e)},expression:"params.content"}},[a("template",{slot:"prepend"},[t._v("回答")])],2)],1),t._v(" "),a("div",{staticClass:"topbar-form"},[a("el-date-picker",{attrs:{size:"small",type:"datetimerange","picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:t.params.time,callback:function(e){t.$set(t.params,"time",e)},expression:"params.time"}})],1),t._v(" "),a("div",{staticClass:"topbar-form"},[a("el-button",{attrs:{type:"info",icon:"el-icon-refresh",size:"small"},on:{click:t.reset}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:t.search}},[t._v("搜索")])],1),t._v(" "),a("div",{staticClass:"form-btns flex1"},[a("div",{staticClass:"topbar-form"},[a("el-button",{attrs:{type:"danger",icon:"el-icon-plus",size:"small"},on:{click:t.addProblem}},[t._v("添加问题")])],1)])])},i=[],n={render:r,staticRenderFns:i};e.a=n},KofW:function(t,e,a){"use strict";function r(t){a("O3EH")}var i=a("Ng+Q"),n=a("GnWc"),s=a("VU/8"),o=r,l=s(i.a,n.a,!1,o,"data-v-0d1cade0",null);e.a=l.exports},L9xd:function(t,e,a){"use strict";function r(t){a("kPw4")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("8VyN"),n=a("w6yD"),s=a("VU/8"),o=r,l=s(i.a,n.a,!1,o,"data-v-4fbc028f",null);e.default=l.exports},"Ng+Q":function(t,e,a){"use strict";var r=a("mvHQ"),i=a.n(r),n=a("6WvH"),s=a("E6Sy");e.a={data:function(){return{params:{title:"",content:"",time:""},pickerOptions:n.a.pickerOptions}},methods:{search:function(){var t=JSON.parse(i()(this.params));t.time&&(t.time=s.a.transTime(t.time).join("-")),this.$emit("search",t)},reset:function(){this.params={title:"",content:"",time:""},this.search()},addProblem:function(){this.$emit("addProblem")}}}},O3EH:function(t,e,a){var r=a("Yo3/");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("bdf4f23c",r,!0)},"Yo3/":function(t,e,a){e=t.exports=a("FZ+f")(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"query.vue",sourceRoot:""}])},cxve:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return s}),a.d(e,"c",function(){return o}),a.d(e,"d",function(){return l});var r=a("NYxO"),i=Object(r.a)("admin"),n=i.mapActions,s=i.mapGetters,o=i.mapMutations,l=i.mapState},kPw4:function(t,e,a){var r=a("8rMT");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("76f2df67",r,!0)},mB4h:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"total, prev, pager, next, jumper","current-page":parseInt(t.$route.query.p)||1,"page-size":20,total:t.totalPage},on:{"current-change":t.handleCurrentChange}})],1)},i=[],n={render:r,staticRenderFns:i};e.a=n},w6yD:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("query",{on:{search:t.search,addProblem:t.addProblem}}),t._v(" "),a("div",{staticClass:"pagination-container"},[a("pagination",{attrs:{totalPage:t.totals},on:{pageChange:t.pageChange}})],1),t._v(" "),a("div",{staticClass:"main-container"},[a("el-table",{ref:"multipleTable",attrs:{data:t.listData,"tooltip-effect":"dark",stripe:"",height:"100%","highlight-current-row":""}},[t._l(t.listFormatter,function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.prop,label:t.label,formatter:t.formatter,align:"center"}})}),t._v(" "),a("el-table-column",{attrs:{align:"center",width:"100",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"danger-color",attrs:{type:"text",size:"small"},on:{click:function(a){t.deleteProblem(e.row.id)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.editProblem(e.row)}}},[t._v("编辑")])]}}])})],2)],1),t._v(" "),a("el-dialog",{attrs:{title:"1"===t.showType?"添加题目":"编辑题目",visible:t.dialogFormVisible,center:"",width:"500px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.cancelProblem}},[a("div",{staticClass:"form-wrapper"},[a("el-form",{staticClass:"form",attrs:{size:"small",model:t.form,"label-width":"60px"}},[a("el-form-item",{staticClass:"form-item",attrs:{label:"问题"}},[a("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{label:"回答"}},[a("el-input",{attrs:{type:"textarea",resize:"none",rows:4},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),a("el-form-item",{staticClass:"form-item form-item-min",attrs:{label:"排序"}},[a("el-input",{attrs:{placeholder:"选填"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:t.cancelProblem}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small",loading:t.pending},on:{click:t.submitProblem}},[t._v("提 交")])],1)])],1)},i=[],n={render:r,staticRenderFns:i};e.a=n}});