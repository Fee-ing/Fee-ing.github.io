(function(t){function e(e){for(var a,s,i=e[0],c=e[1],u=e[2],p=0,m=[];p<i.length;p++)s=i[p],r[s]&&m.push(r[s][0]),r[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(m.length)m.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},r={app:0},o=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/New-movie/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"195b":function(t,e,n){"use strict";var a=n("2cab"),r=n.n(a);r.a},"2cab":function(t,e,n){},"40f5":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"toast"}}),n("router-view")],1)},o=[],s=n("2877"),i={},c=Object(s["a"])(i,r,o,!1,null,null,null);c.options.__file="App.vue";var u=c.exports,l=n("2f62"),p={};n("4917"),n("3b2b");function m(t){var e=document.getElementById("toast")||null;if(e&&""===e.innerHTML&&(""===e.className||"hide"===e.className)){var n={duration:t.duration||2e3,title:t.title||""};e.innerHTML=n.title,e.className="show",setTimeout(function(){e.className="hide",setTimeout(function(){e.innerHTML=""},400)},n.duration)}}function v(t,e,n){n||(n=1);var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3),document.cookie=t+"="+escape(e)+";expires="+a.toGMTString()}function d(t){var e=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return document.cookie.match(e)?unescape(document.cookie.match(e)[2]):null}function f(t){var e=new Date;e.setTime(e.getTime()-1);var n=d(t);n&&(document.cookie=t+"="+n+";expires="+e.toGMTString())}function h(t,e){localStorage.setItem(t,e)}function g(t){return localStorage.getItem(t)}function w(t){var e,n,a,r,o,s,i,c,u,l,p,m,v=new Date(t),d=new Date;return e=parseInt(v.getFullYear()),n=parseInt(v.getMonth())+1,a=parseInt(v.getDate()),r=parseInt(v.getHours()),o=parseInt(v.getMinutes()),s=parseInt(v.getSeconds()),i=parseInt(d.getFullYear()),c=parseInt(d.getMonth())+1,u=parseInt(d.getDate()),l=parseInt(d.getHours()),p=parseInt(d.getMinutes()),m=parseInt(d.getSeconds()),i-e>1?i-e+"年前"+n+"月"+a+"号"+r+"点":i-e>0?"去年"+n+"月"+a+"号"+r+"点":c-n>0?"今年"+n+"月"+a+"号"+r+"点":u-a>1?u-a+"天前"+r+"点":u-a>0?"昨天"+r+"点":l-r>0?l-r+"小时前":p-o>0?p-o+"分钟前":m-s>0?m-s+"秒前":"刚刚"}var b={setRefreshHome:function(t,e){t.isRefreshHome=e},setHomeScrollTop:function(t,e){t.homeScrollTop=e},setUserInfo:function(t,e){t.userInfo={nickname:e.nickname||"",userid:e.objectId||"",sessionToken:e.sessionToken||"",createdAt:e.createdAt||"",updatedAt:e.updatedAt||"",type:e.type||"",token:e.token||""},v("MovieWeb_userInfo",JSON.stringify(t.userInfo))},clearUserInfo:function(t){t.userInfo=null,f("MovieWeb_userInfo")},setSearch:function(t,e){"1"===e.type?t.searchConfig.country=e.data:"2"===e.type?t.searchConfig.type=e.data:"3"===e.type?(t.searchConfig.directors="",t.searchConfig.actors="",t.searchConfig.keywords=e.data):"4"===e.type?(t.searchConfig.keywords="",t.searchConfig.actors="",t.searchConfig.directors=e.data):"5"===e.type&&(t.searchConfig.keywords="",t.searchConfig.directors="",t.searchConfig.actors=e.data)},clearSearch:function(t,e){"1"===e?t.searchConfig.country="":"2"===e?t.searchConfig.type="":(t.searchConfig.keywords="",t.searchConfig.directors="",t.searchConfig.actors="")}},y=(n("f751"),n("96cf"),n("1da1")),C=n("6821"),_=n.n(C),k="https://api.leancloud.cn",D={baseAPI:k,loginAPI:"".concat(k,"/1.1/login"),userAPI:"".concat(k,"/1.1/users"),movieAPI:"".concat(k,"/1.1/classes/movie"),commentAPI:"".concat(k,"/1.1/classes/comment"),downloadAPI:"".concat(k,"/1.1/classes/download")},I={appId:"QklUiCErP7xfkBMUV2ecI5Df-gzGzoHsz",appKey:"XXnTn83FoCjXAeIPKH1BPcTJ"},x=(n("6b54"),n("323e")),T=n.n(x),j=n("bc3a"),O=n.n(j),M=(new Date).getTime(),S=O.a.create({baseURL:D.baseAPI,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json","X-LC-Id":I.appId,"X-LC-Sign":"".concat(_()(M.toString()+I.appKey),",").concat(M)},timeout:5e3}),R={},L=["get","post","put","delete"];L.forEach(function(t){R[t]=function(e,n,a){return new Promise(function(r,o){T.a.start(),S[t](e,n,a).then(function(t){T.a.done(),t.status>=200&&t.status<300?r(t.data):(m({title:"请求错误"}),o(t))}).catch(function(t){T.a.done(),m({title:t.response&&t.response.data&&t.response.data.error||"请求错误，稍候尝试"}),o(t)})})}});var P=R,$={},A={},H={regist:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e,n){var a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.prev=1,t.next=4,P.post(D.userAPI,n);case 4:return r=t.sent,a("setUserInfo",Object.assign(n,r),{root:!0}),t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t["catch"](1),t.abrupt("return",!1);case 12:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e,n){return t.apply(this,arguments)}}(),login:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e,n){var a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.dispatch,t.prev=1,t.next=4,P.post(D.loginAPI,n);case 4:return r=t.sent,a("updateUserToken",r),t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t["catch"](1),t.abrupt("return",!1);case 12:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e,n){return t.apply(this,arguments)}}(),updateUserToken:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e,n){var a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.prev=1,r={token:_()((new Date).getTime())},t.next=5,P.put("".concat(D.userAPI,"/").concat(n.objectId),r,{headers:{"X-LC-Session":n.sessionToken}});case 5:return a("setUserInfo",Object.assign(n,r),{root:!0}),t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t["catch"](1),t.abrupt("return",!1);case 12:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e,n){return t.apply(this,arguments)}}(),getUserToken:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e){var n,a,r,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.rootState,a=e.commit,t.prev=1,!n.userInfo){t.next=15;break}return r={headers:{"X-LC-Session":n.userInfo.sessionToken},params:{keys:"token"}},t.next=6,P.get("".concat(D.userAPI,"/").concat(n.userInfo.userid),r);case 6:if(o=t.sent,!o||!o.token||o.token!==n.userInfo.token){t.next=11;break}return t.abrupt("return",!0);case 11:return a("clearUserInfo",null,{root:!0}),t.abrupt("return",!1);case 13:t.next=16;break;case 15:return t.abrupt("return",!0);case 16:t.next=22;break;case 18:return t.prev=18,t.t0=t["catch"](1),a("clearUserInfo",null,{root:!0}),t.abrupt("return",!1);case 22:case"end":return t.stop()}},t,this,[[1,18]])}));return function(e){return t.apply(this,arguments)}}()},E={},U={namespaced:!0,state:$,getters:A,actions:H,mutations:E},q={pageData:{per:24,page:1,total:0},movieData:{list:[],recent:[]}},N={},X={getMovieList:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e,n){var a,r,o,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.state,r=e.commit,o=e.rootState,n||r("resetPageData"),!(n&&a.pageData.total<=(a.pageData.page-1)*a.pageData.per)){t.next=4;break}return t.abrupt("return",null);case 4:return t.prev=4,s={params:{order:"-createdAt",limit:a.pageData.page*a.pageData.per,skip:(a.pageData.page-1)*a.pageData.per,count:1,where:{type:{$regex:o.searchConfig.type,$options:"sxi"},country:{$regex:o.searchConfig.country,$options:"sxi"},title:{$regex:o.searchConfig.keywords,$options:"sxi"},director:{$regex:o.searchConfig.directors,$options:"sxi"},actor:{$regex:o.searchConfig.actors,$options:"sxi"}}}},t.next=8,P.get(D.movieAPI,s);case 8:return i=t.sent,i&&i.results&&r("setMovieList",{data:i,pageUp:n||!1}),t.abrupt("return",i);case 13:return t.prev=13,t.t0=t["catch"](4),t.abrupt("return",!1);case 16:case"end":return t.stop()}},t,this,[[4,13]])}));return function(e,n){return t.apply(this,arguments)}}(),getMovieRecent:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e){var n,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,a={params:{order:"-updatedAt",limit:7}},t.next=5,P.get(D.movieAPI,a);case 5:return r=t.sent,r&&r.results&&n("setMovieRecent",r),t.abrupt("return",r);case 10:return t.prev=10,t.t0=t["catch"](1),t.abrupt("return",!1);case 13:case"end":return t.stop()}},t,this,[[1,10]])}));return function(e){return t.apply(this,arguments)}}()},z={resetPageData:function(t){t.pageData={per:24,page:1,total:0}},setMovieList:function(t,e){t.pageData.total=e.data.count,e.pageUp?t.movieData.list=t.movieData.list.concat(e.data.results):t.movieData.list=e.data.results,t.pageData.page++},setMovieRecent:function(t,e){t.movieData.recent=e.results}},B={namespaced:!0,state:q,getters:N,actions:X,mutations:z},W={detailData:{movie:{},download:[]},commentData:{page:1,per:15,total:0,isEnding:!1,list:[]}},J={},F={getDetailData:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e,n){var a,r,o,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.rootState,r=e.commit,o=e.dispatch,t.prev=1,t.next=4,P.get("".concat(D.movieAPI,"/").concat(n));case 4:if(s=t.sent,!a.userInfo){t.next=8;break}return t.next=8,o("getDownload",n);case 8:return s&&r("setDetailMovie",s),t.abrupt("return",s);case 12:return t.prev=12,t.t0=t["catch"](1),t.abrupt("return",!1);case 15:case"end":return t.stop()}},t,this,[[1,12]])}));return function(e,n){return t.apply(this,arguments)}}(),getDownload:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e,n){var a,r,o,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.rootState,r=e.commit,t.prev=1,o={headers:{"X-LC-Session":a.userInfo.sessionToken},params:{where:{movie:{__type:"Pointer",className:"movie",objectId:n}}}},t.next=5,P.get(D.downloadAPI,o);case 5:return s=t.sent,s&&s.results&&s.results[0]&&r("setDownload",s.results[0].download),t.abrupt("return",!0);case 10:return t.prev=10,t.t0=t["catch"](1),t.abrupt("return",!1);case 13:case"end":return t.stop()}},t,this,[[1,10]])}));return function(e,n){return t.apply(this,arguments)}}(),getCommonData:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e,n){var a,r,o,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.state,r=e.commit,t.prev=1,o={params:{where:{movie:{__type:"Pointer",className:"movie",objectId:n.movieId}},include:"user",order:"-createdAt",limit:a.commentData.per,skip:0,count:1}},!n||!n.pageDown){t.next=12;break}if(o.params.limit=(a.commentData.page+1)*a.commentData.per,o.params.skip=a.commentData.page*a.commentData.per,!(a.commentData.total<=o.params.skip)){t.next=9;break}return r("setCommentEnding",!0),t.abrupt("return",!0);case 9:r("setCommentPage",a.commentData.page+1),t.next=14;break;case 12:r("setCommentEnding",!1),r("setCommentPage",1);case 14:return t.next=16,P.get(D.commentAPI,o);case 16:return s=t.sent,r("setCommentTotal",s.count||0),i=s&&s.results||[],n&&n.pageDown?r("setCommentList",a.commentData.list.concat(i)):r("setCommentList",i),t.abrupt("return",!0);case 23:return t.prev=23,t.t0=t["catch"](1),t.abrupt("return",!1);case 26:case"end":return t.stop()}},t,this,[[1,23]])}));return function(e,n){return t.apply(this,arguments)}}(),commentMovie:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e,n){var a,r,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.rootState,r=e.dispatch,t.prev=1,o={movie:{__type:"Pointer",className:"movie",objectId:n.movieId},user:{__type:"Pointer",className:"_User",objectId:a.userInfo.userid},comment:n.comment},t.next=5,P.post(D.commentAPI,o,{headers:{"X-LC-Session":a.userInfo.sessionToken}});case 5:return r("getCommonData",{movieId:n.movieId}),t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t["catch"](1),t.abrupt("return",!1);case 12:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e,n){return t.apply(this,arguments)}}(),commentDelte:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e,n){var a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.rootState,r=e.dispatch,t.prev=1,t.next=4,P.delete("".concat(D.commentAPI,"/").concat(n.commentId),{headers:{"X-LC-Session":a.userInfo.sessionToken}});case 4:return t.next=6,r("getCommonData",{movieId:n.movieId});case 6:return t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t["catch"](1),t.abrupt("return",!1);case 12:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e,n){return t.apply(this,arguments)}}()},G={setDetailMovie:function(t,e){t.detailData.movie=e},setDownload:function(t,e){t.detailData.download=e},setCommentList:function(t,e){t.commentData.list=e},setCommentPage:function(t,e){t.commentData.page=e},setCommentTotal:function(t,e){t.commentData.total=e},setCommentEnding:function(t,e){t.commentData.isEnding=e}},K={namespaced:!0,state:W,getters:J,actions:F,mutations:G};a["a"].use(l["b"]);var Y=new l["b"].Store({state:{isRefreshHome:!0,homeScrollTop:0,userInfo:d("MovieWeb_userInfo")&&JSON.parse(d("MovieWeb_userInfo"))||null,searchConfig:{keywords:"",type:"",country:"",actors:"",directors:""}},actions:p,mutations:b,modules:{login:U,movie:B,detail:K}}),Q=n("8c4f"),V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-wrapper"},[n("Login",{class:["1"===t.loginType?"show":"","2"===t.loginType?"hide":""],on:{"close-login":t.closeLogin}}),n("SearchBar",{on:{"show-login":t.showLogin,"search-movie":t.searchMovie}}),n("div",{staticClass:"movie-wrapper"},[t.movieData.list.length>0?n("div",{staticClass:"movie-list"},t._l(t.movieData.list,function(t,e){return n("Movie",{key:e,attrs:{movie:t}})})):n("div",{staticClass:"no-tip"},[t._v("很抱歉，没找到您想看的")]),n("div",{staticClass:"movie-sign"},[n("div",{staticClass:"movie-recent"},[n("div",{staticClass:"title"},[t._v("最近更新")]),n("div",{staticClass:"recent-list"},t._l(t.movieData.recent,function(e,a){return n("div",{key:a,staticClass:"recent-item",attrs:{title:e.title}},[n("span",[t._v(t._s(a+1)+"、")]),n("span",{staticClass:"word-button",on:{click:function(n){t.goMovie(e.objectId)}}},[t._v(t._s(e.title))])])}))]),n("div",{staticClass:"movie-type"},[n("div",{staticClass:"title"},[t._v("电影分类")]),n("div",{staticClass:"type-list"},t._l(t.movieType,function(e,a){return n("div",{key:a,staticClass:"type-item"},[n("span",{staticClass:"word-button",class:[t.searchConfig.type===e?"active":""],on:{click:function(n){n.stopPropagation(),t.setMovieType(e)}}},[t._v(t._s(e))])])}))]),n("div",{staticClass:"movie-type movie-country"},[n("div",{staticClass:"title"},[t._v("国家地区")]),n("div",{staticClass:"type-list"},t._l(t.movieCountry,function(e,a){return n("div",{key:a,staticClass:"type-item"},[n("span",{staticClass:"word-button",class:[t.searchConfig.country===e?"active":""],on:{click:function(n){n.stopPropagation(),t.setMovieCountry(e)}}},[t._v(t._s(e))])])}))]),t.userInfo&&t.userInfo.type<=1?n("div",{staticClass:"movie-web"},[n("div",{staticClass:"title"},[t._v("资源网站")]),n("div",{staticClass:"web-list"},t._l(t.movieWeb,function(e,a){return n("a",{key:a,staticClass:"web-item",attrs:{_target:"blank",href:e}},[t._v(t._s(a))])}))]):t._e()])])],1)},Z=[],tt=n("be94"),et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-wrapper",on:{click:t.closeLogin}},[n("div",{staticClass:"login-form",on:{click:t.stopPro}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.phone,expression:"formData.phone"}],staticClass:"input",attrs:{type:"text",placeholder:"账号"},domProps:{value:t.formData.phone},on:{input:function(e){e.target.composing||t.$set(t.formData,"phone",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"input",attrs:{type:"password",placeholder:"密码"},domProps:{value:t.formData.password},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.loginOpt("1")},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),n("div",{staticClass:"btn",on:{click:function(e){e.stopPropagation(),t.loginOpt("1")}}},[t._v("登录")])])])},nt=[],at=Object(l["a"])("login"),rt=at.mapActions,ot=/^(0|86|17951)?(1[23456789][012356789])[0-9]{8}$/,st=/^[a-z0-9]{6,11}$/,it={name:"Login",data:function(){return{formData:{phone:g("MovieWeb_phone")||"",password:""}}},methods:Object(tt["a"])({},rt(["login","regist"]),{stopPro:function(t){t.stopPropagation()},closeLogin:function(){this.formData.password="",this.$emit("close-login")},loginOpt:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e){var n,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(ot.test(this.formData.phone)){t.next=3;break}return this.$toast({title:"请填写正确的手机号"}),t.abrupt("return");case 3:if(st.test(this.formData.password)){t.next=6;break}return this.$toast({title:"请填写正确的密码"}),t.abrupt("return");case 6:if(n={username:this.formData.phone,password:_()(this.formData.password),nickname:"游客"+_()(this.formData.phone).substr(0,6)},a=null,r="1"===e?"登录":"注册","1"!==e){t.next=15;break}return t.next=12,this.login(n);case 12:a=t.sent,t.next=18;break;case 15:return t.next=17,this.regist(n);case 17:a=t.sent;case 18:a&&(this.$toast({title:"".concat(r,"成功")}),"1"===e&&this.$emit("login-success"),this.closeLogin(),h("MovieWeb_phone",this.formData.phone));case 19:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()})},ct=it,ut=(n("ddb4"),Object(s["a"])(ct,et,nt,!1,null,"004a148f",null));ut.options.__file="Login.vue";var lt=ut.exports,pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-bar"},[n("div",{staticClass:"search-form border"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"select small-select",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.type=e.target.multiple?n:n[0]},function(e){t.clearInput("")}]}},t._l(t.searchType,function(e,a){return n("option",{key:a,domProps:{value:a}},[t._v(t._s(e))])})),n("div",{staticClass:"input-wrapper"},[t.searchConfig.country?n("div",{staticClass:"word"},[n("span",[t._v(t._s(t.searchConfig.country))]),n("span",{staticClass:"iconfont icon-cuowu word-clear",on:{click:function(e){e.stopPropagation(),t.clearInput("1")}}})]):t._e(),t.searchConfig.type?n("div",{staticClass:"word"},[n("span",[t._v(t._s(t.searchConfig.type))]),n("span",{staticClass:"iconfont icon-cuowu word-clear",on:{click:function(e){e.stopPropagation(),t.clearInput("2")}}})]):t._e(),n("input",{directives:[{name:"model",rawName:"v-model",value:t.keywords,expression:"keywords"}],staticClass:"input small-input",attrs:{type:"text"},domProps:{value:t.keywords},on:{input:[function(e){e.target.composing||(t.keywords=e.target.value)},t.setInput]}}),t.searchConfig.keywords||t.searchConfig.directors||t.searchConfig.actors?n("span",{staticClass:"iconfont icon-cuowu input-clear",attrs:{title:"清空搜索内容"},on:{click:function(e){return e.stopPropagation(),t.clearInput(e)}}}):t._e()]),n("div",{staticClass:"button small-button search-button",on:{click:function(e){return e.stopPropagation(),t.searchOpt(e)}}},[n("span",{staticClass:"iconfont icon-search"})])]),n("div",{staticClass:"user-login"},[t.userInfo?n("div",{staticClass:"log-button button solid-button",attrs:{title:"点击退出登录"},on:{click:t.closeLogin}},[t._v(t._s(t.userInfo.nickname))]):n("div",{staticClass:"log-button button solid-button",attrs:{title:"登录后资源可见"},on:{click:t.showLogin}},[t._v("登录")])])])},mt=[],vt=(n("a481"),{3:"电影名称",4:"导演",5:"演员"}),dt=["剧情","喜剧","动作","爱情","科幻","动画","悬疑","惊悚","恐怖","纪录片","短片","情色","同性","音乐","歌舞","家庭","儿童","传记","历史","战争","犯罪","西部","奇幻","冒险","灾难","武侠","古装","运动","黑色电影"],ft=["大陆","美国","香港","台湾","日本","韩国","英国","法国","德国","意大利","西班牙","印度","泰国","俄罗斯","伊朗","加拿大","丹麦","爱尔兰","瑞典","巴西","澳大利亚"],ht={"LOL电影天堂":"http://www.loldytit.com/","80s电影网":"https://www.80s.tw/","电影天堂":"http://www.dytt8.net/index.htm","人人影视":"http://www.zimuzu.tv/","天天美剧":"http://www.ttmeiju.com/","韩饭网":"http://www.hanfan.cc/","BT之家":"http://www.btbtt77.com/","追新番日剧站":"http://www.zhuixinfan.com/main.php","网盘搜搜":"http://www.pansoso.com/","海盗湾":"http://www.hdwan.net/","高清电台":"http://gaoqing.fm/?from=gaoqingla","电影港":"http://www.dygang.com/","ED2000资源共享":"http://www.ed2000.com/","中国高清网":"http://gaoqing.la/","看天堂":"http://www.kantiantang.com/","种子磁力搜索":"http://zhongzicili.me/","DiggBT搜索":"https://diggbts.xyz/","字幕库":"https://www.zimuku.cn/"},gt={name:"SearchBar",data:function(){return{searchType:vt,type:"3",keywords:""}},computed:Object(l["e"])(["userInfo","searchConfig"]),methods:Object(tt["a"])({},Object(l["d"])(["clearUserInfo","setSearch","clearSearch"]),{showLogin:function(){this.$emit("show-login")},closeLogin:function(){this.clearUserInfo(),this.$toast({title:"退出登录"})},setInput:function(){this.setSearch({type:this.type,data:this.keywords.replace(/(^\s*)|(\s*$)/,"")})},clearInput:function(t){this.keywords="",this.clearSearch(t||""),this.$emit("search-movie")},searchOpt:function(){""!==this.keywords.replace(/(^\s*)|(\s*$)/,"")&&this.$emit("search-movie")}})},wt=gt,bt=(n("e169"),Object(s["a"])(wt,pt,mt,!1,null,"716c8dd0",null));bt.options.__file="SearchBar.vue";var yt=bt.exports,Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"movie",on:{click:function(e){t.goMovie(t.movie.objectId)}}},[n("div",{staticClass:"poster",style:{backgroundImage:"url("+t.movie.poster+")"}},[n("span",{staticClass:"score"},[t._v(t._s(t.movie.score))])]),n("div",{staticClass:"name"},[t._v(t._s(t.movie.title))])])},_t=[],kt={name:"Movie",props:{movie:{type:Object,default:function(){return{}}}},methods:Object(tt["a"])({},Object(l["d"])(["setHomeScrollTop"]),{goMovie:function(t){this.setHomeScrollTop(document.querySelector("#app").scrollTop),this.$router.push({path:"detail",query:{movie:t}})}})},Dt=kt,It=(n("7300"),Object(s["a"])(Dt,Ct,_t,!1,null,"b0df76b6",null));It.options.__file="Movie.vue";var xt=It.exports,Tt={name:"Home",components:{Login:lt,SearchBar:yt,Movie:xt},data:function(){return{movieType:dt,movieCountry:ft,movieWeb:ht,loginType:"",isLoading:!1}},computed:Object(tt["a"])({},Object(l["e"])({isRefreshHome:function(t){return t.isRefreshHome},homeScrollTop:function(t){return t.homeScrollTop},userInfo:function(t){return t.userInfo},searchConfig:function(t){return t.searchConfig},movieData:function(t){return t.movie.movieData}})),mounted:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=document.querySelector("#app"),e.scrollTop=this.homeScrollTop,!this.isRefreshHome){t.next=6;break}return t.next=5,this.getMovie();case 5:this.setRefreshHome(!1);case 6:n=this,e.addEventListener("scroll",function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.target.offsetHeight+e.target.scrollTop+100>e.target.scrollHeight)||n.isLoading){t.next=5;break}return n.isLoading=!0,t.next=4,n.getMovieList(!0);case 4:n.isLoading=!1;case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:Object(tt["a"])({},Object(l["d"])({setRefreshHome:"setRefreshHome",setSearch:"setSearch",clearSearch:"clearSearch"}),Object(l["c"])({getMovieList:"movie/getMovieList",getMovieRecent:"movie/getMovieRecent",getUserToken:"login/getUserToken"}),{getMovie:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getMovieList();case 2:return t.next=4,this.getMovieRecent();case 4:return t.next=6,this.getUserToken();case 6:e=t.sent,e||this.$toast({title:"您的账号已在异地登录，请重新登录"});case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),showLogin:function(){this.loginType="1"},closeLogin:function(){this.loginType="2"},searchMovie:function(){this.getMovieList()},setMovieCountry:function(t){t===this.searchConfig.country?this.clearSearch("1"):this.setSearch({type:"1",data:t}),this.getMovieList()},setMovieType:function(t){t===this.searchConfig.type?this.clearSearch("2"):this.setSearch({type:"2",data:t}),this.getMovieList()},goMovie:function(t){this.$router.push({path:"detail",query:{movie:t}})}})},jt=Tt,Ot=(n("195b"),Object(s["a"])(jt,V,Z,!1,null,"0a851130",null));Ot.options.__file="Home.vue";var Mt=Ot.exports,St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-wrapper"},[n("Login",{class:["1"===t.loginType?"show":"","2"===t.loginType?"hide":""],on:{"close-login":t.closeLogin,"login-success":t.loginSuccess}}),n("h1",{staticClass:"movie-title"},[t._v(t._s(t.detailData.movie.title))]),n("div",{staticClass:"movie-info"},[n("div",{staticClass:"movie-poster",style:{backgroundImage:"url("+t.detailData.movie.poster+")"}}),n("div",{staticClass:"movie-detail"},[n("div",{staticClass:"detail-item"},[n("div",{staticClass:"title"},[t._v("导演：")]),n("div",[t._v(t._s(t.detailData.movie.director))])]),n("div",{staticClass:"detail-item"},[n("div",{staticClass:"title"},[t._v("主演：")]),n("div",[t._v(t._s(t.detailData.movie.actor))])]),n("div",{staticClass:"detail-item"},[n("div",{staticClass:"title"},[t._v("类型：")]),n("div",[t._v(t._s(t.detailData.movie.type))])]),n("div",{staticClass:"detail-item"},[n("div",{staticClass:"title"},[t._v("制片国家/地区：")]),n("div",[t._v(t._s(t.detailData.movie.country))])]),n("div",{staticClass:"detail-item"},[n("div",{staticClass:"title"},[t._v("上映日期：")]),n("div",[t._v(t._s(t.detailData.movie.showtime))])]),n("div",{staticClass:"detail-item"},[n("div",{staticClass:"title"},[t._v("片长：")]),n("div",[t._v(t._s(t.detailData.movie.duration))])]),n("div",{staticClass:"detail-item"},[n("div",{staticClass:"title"},[t._v("评分：")]),n("div",[t._v(t._s(t.detailData.movie.score))])])])]),n("div",{staticClass:"movie-desc"},[n("div",{staticClass:"title"},[t._v("剧情简介：")]),n("div",[t._v(t._s(t.detailData.movie.desc))])]),t.userInfo?n("div",{staticClass:"movie-download"},[n("div",{staticClass:"title"},[t._v("资源下载：")]),n("div",{staticClass:"download-btn"},t._l(t.detailData.download,function(e,a){return n("a",{key:a,staticClass:"button small-button",attrs:{href:e.link,target:"_blank",title:"点击下载"}},[t._v(t._s(e.name))])}))]):t._e(),n("div",{staticClass:"movie-form border"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.commentInput,expression:"commentInput"}],staticClass:"input small-input",attrs:{type:"text",placeholder:"不超过100字"},domProps:{value:t.commentInput},on:{input:function(e){e.target.composing||(t.commentInput=e.target.value)}}}),n("div",{staticClass:"button small-button",on:{click:t.commentOpt}},[t._v("吐槽一下")])]),t.commentData.list.length>0?n("div",{staticClass:"movie-comment"},t._l(t.commentData.list,function(e,a){return n("div",{key:a,staticClass:"comment"},[n("div",{staticClass:"user"},[n("span",{staticClass:"name"},[t._v(t._s(e.user.nickname))]),n("span",{staticClass:"time"},[t._v(t._s(t.formatTime(e.createdAt)))]),t.userInfo&&t.userInfo.userid===e.user.objectId?n("div",{staticClass:"word-button",on:{click:function(n){t.delCommentOpt(e)}}},[t._v("删除")]):t._e()]),n("div",{staticClass:"detail"},[t._v(t._s(e.comment))])])})):t._e(),t.commentData.total<=0?n("div",{staticClass:"movie-tip"},[t._v("一起来吐槽 ~")]):t.commentData.total>0&&t.commentData.isEnding?n("div",{staticClass:"movie-tip"},[t._v("到底啦 ~")]):t._e()],1)},Rt=[],Lt={name:"Detail",components:{Login:lt},data:function(){return{loginType:"",commentInput:""}},computed:Object(tt["a"])({},Object(l["e"])({detailData:function(t){return t.detail.detailData},commentData:function(t){return t.detail.commentData},userInfo:function(t){return t.userInfo}})),created:function(){this.getDetailData(this.$route.query.movie),this.getCommonData({movieId:this.$route.query.movie})},mounted:function(){var t=this,e=this;this.$nextTick(function(){document.querySelector("#app").addEventListener("scroll",function(){var n=Object(y["a"])(regeneratorRuntime.mark(function n(a){return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:a.target.offsetHeight+a.target.scrollTop+100>=a.target.scrollHeight&&!e.commentData.isEnding&&e.getCommonData({movieId:t.$route.query.movie,pageDown:!0});case 1:case"end":return n.stop()}},n,this)}));return function(t){return n.apply(this,arguments)}}())})},methods:Object(tt["a"])({},Object(l["c"])({getDetailData:"detail/getDetailData",getDownload:"detail/getDownload",getCommonData:"detail/getCommonData",commentMovie:"detail/commentMovie",commentDelte:"detail/commentDelte"}),{formatTime:w,closeLogin:function(){this.loginType="2"},loginSuccess:function(){this.getDownload(this.$route.query.movie),this.getCommonData({movieId:this.$route.query.movie})},commentOpt:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.userInfo){t.next=4;break}return this.$toast({title:"请先登录"}),this.loginType="1",t.abrupt("return");case 4:if(e=this.commentInput.replace(/(^\s*)|(\s*$)/,""),""!==e){t.next=7;break}return t.abrupt("return");case 7:if(!(e.length>100)){t.next=10;break}return this.$toast({title:"留言不超过100字"}),t.abrupt("return");case 10:return t.next=12,this.commentMovie({movieId:this.$route.query.movie,comment:e});case 12:n=t.sent,n&&(this.commentInput="");case 14:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),delCommentOpt:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e){var n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=window.confirm("确认删除该条评论？"),!n){t.next=6;break}return t.next=4,this.commentDelte({movieId:this.$route.query.movie,commentId:e.objectId});case 4:a=t.sent,a&&this.$toast({title:"删除成功"});case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()})},Pt=Lt,$t=(n("8938"),Object(s["a"])(Pt,St,Rt,!1,null,"1eab7c1e",null));$t.options.__file="Detail.vue";var At=$t.exports;a["a"].use(Q["a"]);var Ht=new Q["a"]({routes:[{path:"/",name:"home",component:Mt},{path:"/Detail",name:"Detail",component:At}]});n("40f5"),n("f266"),n("ee40"),n("be35");a["a"].config.productionTip=!1,a["a"].prototype.$toast=m,new a["a"]({store:Y,router:Ht,render:function(t){return t(u)}}).$mount("#app")},7300:function(t,e,n){"use strict";var a=n("b6ff"),r=n.n(a);r.a},"839b":function(t,e,n){},8938:function(t,e,n){"use strict";var a=n("839b"),r=n.n(a);r.a},"916d":function(t,e,n){},b6ff:function(t,e,n){},be35:function(t,e,n){},cb4d:function(t,e,n){},ddb4:function(t,e,n){"use strict";var a=n("916d"),r=n.n(a);r.a},e169:function(t,e,n){"use strict";var a=n("cb4d"),r=n.n(a);r.a},ee40:function(t,e,n){},f266:function(t,e,n){}});
//# sourceMappingURL=app.5ef9f834.js.map