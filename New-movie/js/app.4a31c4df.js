(function(t){function e(e){for(var a,o,s=e[0],c=e[1],u=e[2],p=0,m=[];p<s.length;p++)o=s[p],r[o]&&m.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(m.length)m.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},r={app:0},i=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/New-movie/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"08d1":function(t,e,n){t.exports=n.p+"img/step3.1ddf1662.jpg"},"0cb3":function(t,e,n){},"20e4":function(t,e,n){},"391e":function(t,e,n){"use strict";var a=n("0cb3"),r=n.n(a);r.a},"40f5":function(t,e,n){},4858:function(t,e,n){"use strict";var a=n("20e4"),r=n.n(a);r.a},"4fad":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"toast"}}),n("router-view")],1)},i=[],o=n("2877"),s={},c=Object(o["a"])(s,r,i,!1,null,null,null);c.options.__file="App.vue";var u=c.exports,l=n("2f62"),p={};n("4917"),n("3b2b");function m(t){var e=document.getElementById("toast")||null;if(e&&""===e.innerHTML&&(""===e.className||"hide"===e.className)){var n={duration:t.duration||2e3,title:t.title||""};e.innerHTML=n.title,e.className="show",setTimeout(function(){e.className="hide",setTimeout(function(){e.innerHTML=""},400)},n.duration)}}function d(t,e,n){n||(n=1);var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3),document.cookie=t+"="+escape(e)+";expires="+a.toGMTString()}function v(t){var e=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return document.cookie.match(e)?unescape(document.cookie.match(e)[2]):null}function f(t){var e=new Date;e.setTime(e.getTime()-1);var n=v(t);n&&(document.cookie=t+"="+n+";expires="+e.toGMTString())}function h(t,e){localStorage.setItem(t,e)}function g(t){return localStorage.getItem(t)}function b(t){var e,n,a,r,i,o,s,c,u,l,p,m,d=new Date(t),v=new Date;return e=parseInt(d.getFullYear()),n=parseInt(d.getMonth())+1,a=parseInt(d.getDate()),r=parseInt(d.getHours()),i=parseInt(d.getMinutes()),o=parseInt(d.getSeconds()),s=parseInt(v.getFullYear()),c=parseInt(v.getMonth())+1,u=parseInt(v.getDate()),l=parseInt(v.getHours()),p=parseInt(v.getMinutes()),m=parseInt(v.getSeconds()),s-e>1?s-e+"年前"+n+"月"+a+"号"+r+"点":s-e>0?"去年"+n+"月"+a+"号"+r+"点":c-n>0?"今年"+n+"月"+a+"号"+r+"点":u-a>1?u-a+"天前"+r+"点":u-a>0?"昨天"+r+"点":l-r>0?l-r+"小时前":p-i>0?p-i+"分钟前":m-o>0?m-o+"秒前":"刚刚"}var w={setRefreshHome:function(t,e){t.isRefreshHome=e},setHomeScrollTop:function(t,e){t.homeScrollTop=e},setUserInfo:function(t,e){t.userInfo={nickname:e.nickname||"",userid:e.objectId||"",sessionToken:e.sessionToken||"",createdAt:e.createdAt||"",updatedAt:e.updatedAt||"",type:e.type,token:e.token||""},d("MovieWeb_userInfo",JSON.stringify(t.userInfo))},clearUserInfo:function(t){t.userInfo=null,f("MovieWeb_userInfo")},setSearch:function(t,e){"1"===e.type?t.searchConfig.country=e.data:"2"===e.type?t.searchConfig.type=e.data:"3"===e.type?(t.searchConfig.directors="",t.searchConfig.actors="",t.searchConfig.keywords=e.data):"4"===e.type?(t.searchConfig.keywords="",t.searchConfig.actors="",t.searchConfig.directors=e.data):"5"===e.type&&(t.searchConfig.keywords="",t.searchConfig.directors="",t.searchConfig.actors=e.data)},clearSearch:function(t,e){"1"===e?t.searchConfig.country="":"2"===e?t.searchConfig.type="":(t.searchConfig.keywords="",t.searchConfig.directors="",t.searchConfig.actors="")}},y=(n("f751"),n("96cf"),n("1da1")),C=n("6821"),k=n.n(C),_="https://api.leancloud.cn",x={baseAPI:_,loginAPI:"".concat(_,"/1.1/login"),userAPI:"".concat(_,"/1.1/users"),movieAPI:"".concat(_,"/1.1/classes/movie"),commentAPI:"".concat(_,"/1.1/classes/comment"),downloadAPI:"".concat(_,"/1.1/classes/download")},I={appId:"QklUiCErP7xfkBMUV2ecI5Df-gzGzoHsz",appKey:"XXnTn83FoCjXAeIPKH1BPcTJ"},D=(n("6b54"),n("323e")),$=n.n(D),O=n("bc3a"),T=n.n(O),j=(new Date).getTime(),P=T.a.create({baseURL:x.baseAPI,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json","X-LC-Id":I.appId,"X-LC-Sign":"".concat(k()(j.toString()+I.appKey),",").concat(j)},timeout:5e3}),S={},M=["get","post","put","delete"];M.forEach(function(t){S[t]=function(e,n,a){return new Promise(function(r,i){$.a.start(),P[t](e,n,a).then(function(t){$.a.done(),t.status>=200&&t.status<300?r(t.data):(m({title:"请求错误"}),i(t))}).catch(function(t){$.a.done(),m({title:t.response&&t.response.data&&t.response.data.error||"请求错误，稍候尝试"}),i(t)})})}});var L=S,R={},A={},N={regist:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e,n){var a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.prev=1,t.next=4,L.post(x.userAPI,n);case 4:return r=t.sent,a("setUserInfo",Object.assign(n,r),{root:!0}),t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t["catch"](1),t.abrupt("return",!1);case 12:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e,n){return t.apply(this,arguments)}}(),login:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e,n){var a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.dispatch,t.prev=1,t.next=4,L.post(x.loginAPI,n);case 4:return r=t.sent,a("updateUserToken",r),t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t["catch"](1),t.abrupt("return",!1);case 12:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e,n){return t.apply(this,arguments)}}(),updateUserToken:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e,n){var a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.prev=1,r={token:k()((new Date).getTime())},t.next=5,L.put("".concat(x.userAPI,"/").concat(n.objectId),r,{headers:{"X-LC-Session":n.sessionToken}});case 5:return a("setUserInfo",Object.assign(n,r),{root:!0}),t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t["catch"](1),t.abrupt("return",!1);case 12:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e,n){return t.apply(this,arguments)}}(),getUserToken:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e){var n,a,r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.rootState,a=e.commit,t.prev=1,!n.userInfo){t.next=15;break}return r={headers:{"X-LC-Session":n.userInfo.sessionToken},params:{keys:"token"}},t.next=6,L.get("".concat(x.userAPI,"/").concat(n.userInfo.userid),r);case 6:if(i=t.sent,!i||!i.token||i.token!==n.userInfo.token){t.next=11;break}return t.abrupt("return",!0);case 11:return a("clearUserInfo",null,{root:!0}),t.abrupt("return",!1);case 13:t.next=16;break;case 15:return t.abrupt("return",!0);case 16:t.next=22;break;case 18:return t.prev=18,t.t0=t["catch"](1),a("clearUserInfo",null,{root:!0}),t.abrupt("return",!1);case 22:case"end":return t.stop()}},t,this,[[1,18]])}));return function(e){return t.apply(this,arguments)}}()},H={},q={namespaced:!0,state:R,getters:A,actions:N,mutations:H},E={pageData:{per:24,page:1,total:0},movieData:{list:[],recent:[]}},U={},X={getMovieList:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e,n){var a,r,i,o,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.state,r=e.commit,i=e.rootState,n||r("resetPageData"),!(n&&a.pageData.total<=(a.pageData.page-1)*a.pageData.per)){t.next=4;break}return t.abrupt("return",null);case 4:return t.prev=4,o={params:{order:"-createdAt",limit:a.pageData.page*a.pageData.per,skip:(a.pageData.page-1)*a.pageData.per,count:1,where:{type:{$regex:i.searchConfig.type,$options:"sxi"},country:{$regex:i.searchConfig.country,$options:"sxi"},title:{$regex:i.searchConfig.keywords,$options:"sxi"},director:{$regex:i.searchConfig.directors,$options:"sxi"},actor:{$regex:i.searchConfig.actors,$options:"sxi"}}}},t.next=8,L.get(x.movieAPI,o);case 8:return s=t.sent,s&&s.results&&r("setMovieList",{data:s,pageUp:n||!1}),t.abrupt("return",s);case 13:return t.prev=13,t.t0=t["catch"](4),t.abrupt("return",!1);case 16:case"end":return t.stop()}},t,this,[[4,13]])}));return function(e,n){return t.apply(this,arguments)}}(),getMovieRecent:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e){var n,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,a={params:{order:"-updatedAt",limit:7}},t.next=5,L.get(x.movieAPI,a);case 5:return r=t.sent,r&&r.results&&n("setMovieRecent",r),t.abrupt("return",r);case 10:return t.prev=10,t.t0=t["catch"](1),t.abrupt("return",!1);case 13:case"end":return t.stop()}},t,this,[[1,10]])}));return function(e){return t.apply(this,arguments)}}()},z={resetPageData:function(t){t.pageData={per:24,page:1,total:0}},setMovieList:function(t,e){t.pageData.total=e.data.count,e.pageUp?t.movieData.list=t.movieData.list.concat(e.data.results):t.movieData.list=e.data.results,t.pageData.page++},setMovieRecent:function(t,e){t.movieData.recent=e.results}},B={namespaced:!0,state:E,getters:U,actions:X,mutations:z},W={detailData:{movie:{},download:[]},commentData:{page:1,per:15,total:0,isEnding:!1,list:[]}},J={},F={getDetailData:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e,n){var a,r,i,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.rootState,r=e.commit,i=e.dispatch,t.prev=1,t.next=4,L.get("".concat(x.movieAPI,"/").concat(n));case 4:if(o=t.sent,!a.userInfo){t.next=8;break}return t.next=8,i("getDownload",n);case 8:return o&&r("setDetailMovie",o),t.abrupt("return",o);case 12:return t.prev=12,t.t0=t["catch"](1),t.abrupt("return",!1);case 15:case"end":return t.stop()}},t,this,[[1,12]])}));return function(e,n){return t.apply(this,arguments)}}(),getDownload:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e,n){var a,r,i,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.rootState,r=e.commit,t.prev=1,i={headers:{"X-LC-Session":a.userInfo.sessionToken},params:{where:{movie:{__type:"Pointer",className:"movie",objectId:n}}}},t.next=5,L.get(x.downloadAPI,i);case 5:return o=t.sent,o&&o.results&&o.results[0]&&r("setDownload",{download:o.results[0].download,downloadId:o.results[0].objectId}),t.abrupt("return",!0);case 10:return t.prev=10,t.t0=t["catch"](1),t.abrupt("return",!1);case 13:case"end":return t.stop()}},t,this,[[1,10]])}));return function(e,n){return t.apply(this,arguments)}}(),getCommonData:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e,n){var a,r,i,o,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.state,r=e.commit,t.prev=1,i={params:{where:{movie:{__type:"Pointer",className:"movie",objectId:n.movieId}},include:"user",order:"-createdAt",limit:a.commentData.per,skip:0,count:1}},!n||!n.pageDown){t.next=12;break}if(i.params.limit=(a.commentData.page+1)*a.commentData.per,i.params.skip=a.commentData.page*a.commentData.per,!(a.commentData.total<=i.params.skip)){t.next=9;break}return r("setCommentEnding",!0),t.abrupt("return",!0);case 9:r("setCommentPage",a.commentData.page+1),t.next=14;break;case 12:r("setCommentEnding",!1),r("setCommentPage",1);case 14:return t.next=16,L.get(x.commentAPI,i);case 16:return o=t.sent,r("setCommentTotal",o.count||0),s=o&&o.results||[],n&&n.pageDown?r("setCommentList",a.commentData.list.concat(s)):r("setCommentList",s),t.abrupt("return",!0);case 23:return t.prev=23,t.t0=t["catch"](1),t.abrupt("return",!1);case 26:case"end":return t.stop()}},t,this,[[1,23]])}));return function(e,n){return t.apply(this,arguments)}}(),commentMovie:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e,n){var a,r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.rootState,r=e.dispatch,t.prev=1,i={movie:{__type:"Pointer",className:"movie",objectId:n.movieId},user:{__type:"Pointer",className:"_User",objectId:a.userInfo.userid},comment:n.comment},t.next=5,L.post(x.commentAPI,i,{headers:{"X-LC-Session":a.userInfo.sessionToken}});case 5:return r("getCommonData",{movieId:n.movieId}),t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t["catch"](1),t.abrupt("return",!1);case 12:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e,n){return t.apply(this,arguments)}}(),commentDelte:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e,n){var a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.rootState,r=e.dispatch,t.prev=1,t.next=4,L.delete("".concat(x.commentAPI,"/").concat(n.commentId),{headers:{"X-LC-Session":a.userInfo.sessionToken}});case 4:return t.next=6,r("getCommonData",{movieId:n.movieId});case 6:return t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t["catch"](1),t.abrupt("return",!1);case 12:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e,n){return t.apply(this,arguments)}}()},G={setDetailMovie:function(t,e){t.detailData.movie=Object.assign(t.detailData.movie,e)},setDownload:function(t,e){t.detailData.download=e.download,t.detailData.movie.downloadId=e.downloadId},setCommentList:function(t,e){t.commentData.list=e},setCommentPage:function(t,e){t.commentData.page=e},setCommentTotal:function(t,e){t.commentData.total=e},setCommentEnding:function(t,e){t.commentData.isEnding=e}},K={namespaced:!0,state:W,getters:J,actions:F,mutations:G},V={},Y={},Q={addMovie:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e,n){var a,r,i,o,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.rootState,r=e.commit,t.prev=1,i={download:n.download},delete n.download,t.next=6,L.post(x.movieAPI,n,{headers:{"X-LC-Session":a.userInfo.sessionToken}});case 6:return o=t.sent,i.movie={__type:"Pointer",className:"movie",objectId:o.objectId},t.next=10,L.post(x.downloadAPI,i,{headers:{"X-LC-Session":a.userInfo.sessionToken}});case 10:return s=t.sent,o&&s&&r("setRefreshHome",!0,{root:!0}),t.abrupt("return",!0);case 15:return t.prev=15,t.t0=t["catch"](1),t.abrupt("return",!1);case 18:case"end":return t.stop()}},t,this,[[1,15]])}));return function(e,n){return t.apply(this,arguments)}}(),updateMovie:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e,n){var a,r,i,o,s,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.rootState,r=e.commit,t.prev=1,i={download:n.download},o=n.downloadId,delete n.download,delete n.downloadId,delete n.createdAt,delete n.updatedAt,t.next=10,L.put("".concat(x.movieAPI,"/").concat(n.objectId),n,{headers:{"X-LC-Session":a.userInfo.sessionToken}});case 10:return s=t.sent,t.next=13,L.put("".concat(x.downloadAPI,"/").concat(o),i,{headers:{"X-LC-Session":a.userInfo.sessionToken}});case 13:return c=t.sent,s&&c&&r("setRefreshHome",!0,{root:!0}),t.abrupt("return",!0);case 18:return t.prev=18,t.t0=t["catch"](1),t.abrupt("return",!1);case 21:case"end":return t.stop()}},t,this,[[1,18]])}));return function(e,n){return t.apply(this,arguments)}}()},Z={},tt={namespaced:!0,state:V,getters:Y,actions:Q,mutations:Z};a["a"].use(l["b"]);var et=new l["b"].Store({state:{isRefreshHome:!0,homeScrollTop:0,userInfo:v("MovieWeb_userInfo")&&JSON.parse(v("MovieWeb_userInfo"))||null,searchConfig:{keywords:"",type:"",country:"",actors:"",directors:""}},actions:p,mutations:w,modules:{login:q,movie:B,detail:K,publish:tt}}),nt=n("8c4f"),at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-wrapper"},[n("Login",{class:["1"===t.loginType?"show":"","2"===t.loginType?"hide":""],on:{"close-login":t.closeLogin}}),n("SearchBar",{on:{"show-login":t.showLogin,"search-movie":t.searchMovie}}),n("div",{staticClass:"movie-wrapper"},[t.movieData.list.length>0?n("div",{staticClass:"movie-list"},t._l(t.movieData.list,function(t,e){return n("Movie",{key:e,attrs:{movie:t}})})):n("div",{staticClass:"no-tip"},[t._v("很抱歉，没找到您想看的")]),n("div",{staticClass:"movie-sign"},[n("div",{staticClass:"movie-recent"},[n("div",{staticClass:"title"},[t._v("最近更新")]),n("div",{staticClass:"recent-list"},t._l(t.movieData.recent,function(e,a){return n("div",{key:a,staticClass:"recent-item",attrs:{title:e.title}},[n("span",[t._v(t._s(a+1)+"、")]),n("span",{staticClass:"word-button",on:{click:function(n){t.goMovie(e.objectId)}}},[t._v(t._s(e.title))])])}))]),n("div",{staticClass:"movie-type"},[n("div",{staticClass:"title"},[t._v("电影分类")]),n("div",{staticClass:"type-list"},t._l(t.movieType,function(e,a){return n("div",{key:a,staticClass:"type-item"},[n("span",{staticClass:"word-button",class:[t.searchConfig.type===e?"active":""],on:{click:function(n){n.stopPropagation(),t.setMovieType(e)}}},[t._v(t._s(e))])])}))]),n("div",{staticClass:"movie-type movie-country"},[n("div",{staticClass:"title"},[t._v("国家地区")]),n("div",{staticClass:"type-list"},t._l(t.movieCountry,function(e,a){return n("div",{key:a,staticClass:"type-item"},[n("span",{staticClass:"word-button",class:[t.searchConfig.country===e?"active":""],on:{click:function(n){n.stopPropagation(),t.setMovieCountry(e)}}},[t._v(t._s(e))])])}))]),t.userInfo&&t.userInfo.type<=1?n("div",{staticClass:"movie-web"},[n("div",{staticClass:"title"},[t._v("资源网站")]),n("div",{staticClass:"web-list"},t._l(t.movieWeb,function(e,a){return n("a",{key:a,staticClass:"web-item",attrs:{_target:"blank",href:e}},[t._v(t._s(a))])}))]):t._e()])])],1)},rt=[],it=n("be94"),ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-wrapper",on:{click:t.closeLogin}},[n("div",{staticClass:"login-form",on:{click:t.stopPro}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.phone,expression:"formData.phone"}],staticClass:"input",attrs:{type:"text",placeholder:"账号"},domProps:{value:t.formData.phone},on:{input:function(e){e.target.composing||t.$set(t.formData,"phone",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"input",attrs:{type:"password",placeholder:"密码"},domProps:{value:t.formData.password},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.loginOpt("1")},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),n("div",{staticClass:"btn",on:{click:function(e){e.stopPropagation(),t.loginOpt("1")}}},[t._v("登录")])])])},st=[],ct=Object(l["a"])("login"),ut=ct.mapActions,lt=/^(0|86|17951)?(1[23456789][012356789])[0-9]{8}$/,pt=/^[a-z0-9]{6,11}$/,mt={name:"Login",data:function(){return{formData:{phone:g("MovieWeb_phone")||"",password:""}}},methods:Object(it["a"])({},ut(["login","regist"]),{stopPro:function(t){t.stopPropagation()},closeLogin:function(){this.formData.password="",this.$emit("close-login")},loginOpt:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e){var n,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(lt.test(this.formData.phone)){t.next=3;break}return this.$toast({title:"请填写正确的手机号"}),t.abrupt("return");case 3:if(pt.test(this.formData.password)){t.next=6;break}return this.$toast({title:"请填写正确的密码"}),t.abrupt("return");case 6:if(n={username:this.formData.phone,password:k()(this.formData.password),nickname:"游客"+k()(this.formData.phone).substr(0,6)},a=null,r="1"===e?"登录":"注册","1"!==e){t.next=15;break}return t.next=12,this.login(n);case 12:a=t.sent,t.next=18;break;case 15:return t.next=17,this.regist(n);case 17:a=t.sent;case 18:a&&(this.$toast({title:"".concat(r,"成功")}),"1"===e&&this.$emit("login-success"),this.closeLogin(),h("MovieWeb_phone",this.formData.phone));case 19:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()})},dt=mt,vt=(n("ddb4"),Object(o["a"])(dt,ot,st,!1,null,"004a148f",null));vt.options.__file="Login.vue";var ft=vt.exports,ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-bar"},[n("div",{staticClass:"search-form border"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"select small-select",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.type=e.target.multiple?n:n[0]},function(e){t.clearInput("")}]}},t._l(t.searchType,function(e,a){return n("option",{key:a,domProps:{value:a}},[t._v(t._s(e))])})),n("div",{staticClass:"input-wrapper"},[t.searchConfig.country?n("div",{staticClass:"word"},[n("span",[t._v(t._s(t.searchConfig.country))]),n("span",{staticClass:"iconfont icon-cuowu word-clear",on:{click:function(e){e.stopPropagation(),t.clearInput("1")}}})]):t._e(),t.searchConfig.type?n("div",{staticClass:"word"},[n("span",[t._v(t._s(t.searchConfig.type))]),n("span",{staticClass:"iconfont icon-cuowu word-clear",on:{click:function(e){e.stopPropagation(),t.clearInput("2")}}})]):t._e(),n("input",{directives:[{name:"model",rawName:"v-model",value:t.keywords,expression:"keywords"}],staticClass:"input small-input",attrs:{type:"text"},domProps:{value:t.keywords},on:{input:[function(e){e.target.composing||(t.keywords=e.target.value)},t.setInput]}}),t.searchConfig.keywords||t.searchConfig.directors||t.searchConfig.actors?n("span",{staticClass:"iconfont icon-cuowu input-clear",attrs:{title:"清空搜索内容"},on:{click:function(e){return e.stopPropagation(),t.clearInput(e)}}}):t._e()]),n("div",{staticClass:"button small-button search-button",on:{click:function(e){return e.stopPropagation(),t.searchOpt(e)}}},[n("span",{staticClass:"iconfont icon-search"})])]),n("div",{staticClass:"user-login"},[t.userInfo?n("div",{staticClass:"log-button button solid-button",attrs:{title:"点击退出登录"},on:{click:t.closeLogin}},[t._v(t._s(t.userInfo.nickname))]):n("div",{staticClass:"log-button button solid-button",attrs:{title:"登录后资源可见"},on:{click:t.showLogin}},[t._v("登录")]),t.userInfo&&"0"===t.userInfo.type?n("div",{staticClass:"log-button button solid-button",on:{click:function(e){t.$router.push("publish")}}},[t._v("发布")]):t._e()])])},gt=[],bt=(n("a481"),{3:"电影名称",4:"导演",5:"演员"}),wt=["剧情","喜剧","动作","爱情","科幻","动画","悬疑","惊悚","恐怖","纪录片","短片","情色","同性","音乐","歌舞","家庭","儿童","传记","历史","战争","犯罪","西部","奇幻","冒险","灾难","武侠","古装","运动","黑色电影"],yt=["大陆","美国","香港","台湾","日本","韩国","英国","法国","德国","意大利","西班牙","印度","泰国","俄罗斯","伊朗","加拿大","丹麦","爱尔兰","瑞典","巴西","澳大利亚"],Ct={"LOL电影天堂":"http://www.loldytit.com/","80s电影网":"https://www.80s.tw/","电影天堂":"http://www.dytt8.net/index.htm","人人影视":"http://www.zimuzu.tv/","天天美剧":"http://www.ttmeiju.com/","韩饭网":"http://www.hanfan.cc/","BT之家":"http://www.btbtt77.com/","追新番日剧站":"http://www.zhuixinfan.com/main.php","网盘搜搜":"http://www.pansoso.com/","海盗湾":"http://www.hdwan.net/","高清电台":"http://gaoqing.fm/?from=gaoqingla","电影港":"http://www.dygang.com/","ED2000资源共享":"http://www.ed2000.com/","中国高清网":"http://gaoqing.la/","看天堂":"http://www.kantiantang.com/","种子磁力搜索":"http://zhongzicili.me/","DiggBT搜索":"https://diggbts.xyz/","字幕库":"https://www.zimuku.cn/"},kt={name:"SearchBar",data:function(){return{searchType:bt,type:"3",keywords:""}},computed:Object(l["e"])(["userInfo","searchConfig"]),methods:Object(it["a"])({},Object(l["d"])(["clearUserInfo","setSearch","clearSearch"]),{showLogin:function(){this.$emit("show-login")},closeLogin:function(){this.clearUserInfo(),this.$toast({title:"退出登录"})},setInput:function(){this.setSearch({type:this.type,data:this.keywords.replace(/(^\s*)|(\s*$)/,"")})},clearInput:function(t){this.keywords="",this.clearSearch(t||""),this.$emit("search-movie")},searchOpt:function(){""!==this.keywords.replace(/(^\s*)|(\s*$)/,"")&&this.$emit("search-movie")}})},_t=kt,xt=(n("ab39"),Object(o["a"])(_t,ht,gt,!1,null,"f8d31816",null));xt.options.__file="SearchBar.vue";var It=xt.exports,Dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"movie",on:{click:function(e){t.goMovie(t.movie.objectId)}}},[n("div",{staticClass:"poster background-image",style:{backgroundImage:"url("+t.movie.poster+")"}},[n("span",{staticClass:"score"},[t._v(t._s(t.movie.score))]),t.userInfo&&"0"===t.userInfo.type?n("div",{staticClass:"edit-button",on:{click:function(e){e.stopPropagation(),t.goPublish(t.movie.objectId)}}},[t._v("编辑")]):t._e()]),n("div",{staticClass:"name"},[t._v(t._s(t.movie.title))])])},$t=[],Ot={name:"Movie",props:{movie:{type:Object,default:function(){return{}}}},computed:Object(l["e"])(["userInfo"]),methods:Object(it["a"])({},Object(l["d"])(["setHomeScrollTop"]),{goMovie:function(t){this.setHomeScrollTop(document.querySelector("#app").scrollTop),this.$router.push({path:"detail",query:{movieId:t}})},goPublish:function(t){this.$router.push({path:"publish",query:{movieId:t}})}})},Tt=Ot,jt=(n("8eba"),Object(o["a"])(Tt,Dt,$t,!1,null,"63876190",null));jt.options.__file="Movie.vue";var Pt=jt.exports,St={name:"Home",components:{Login:ft,SearchBar:It,Movie:Pt},data:function(){return{movieType:wt,movieCountry:yt,movieWeb:Ct,loginType:"",isLoading:!1}},computed:Object(it["a"])({},Object(l["e"])({isRefreshHome:function(t){return t.isRefreshHome},homeScrollTop:function(t){return t.homeScrollTop},userInfo:function(t){return t.userInfo},searchConfig:function(t){return t.searchConfig},movieData:function(t){return t.movie.movieData}})),mounted:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(document.querySelector("title").innerHTML="（*^_^*）",e=document.querySelector("#app"),e.scrollTop=this.homeScrollTop,!this.isRefreshHome){t.next=7;break}return t.next=6,this.getMovie();case 6:this.setRefreshHome(!1);case 7:n=this,e.addEventListener("scroll",function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.target.offsetHeight+e.target.scrollTop+100>e.target.scrollHeight)||n.isLoading){t.next=5;break}return n.isLoading=!0,t.next=4,n.getMovieList(!0);case 4:n.isLoading=!1;case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:Object(it["a"])({},Object(l["d"])({setRefreshHome:"setRefreshHome",setSearch:"setSearch",clearSearch:"clearSearch"}),Object(l["c"])({getMovieList:"movie/getMovieList",getMovieRecent:"movie/getMovieRecent",getUserToken:"login/getUserToken"}),{getMovie:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getMovieList();case 2:return t.next=4,this.getMovieRecent();case 4:return t.next=6,this.getUserToken();case 6:e=t.sent,e||this.$toast({title:"您的账号已在异地登录，请重新登录"});case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),showLogin:function(){this.loginType="1"},closeLogin:function(){this.loginType="2"},searchMovie:function(){this.getMovieList()},setMovieCountry:function(t){t===this.searchConfig.country?this.clearSearch("1"):this.setSearch({type:"1",data:t}),this.getMovieList()},setMovieType:function(t){t===this.searchConfig.type?this.clearSearch("2"):this.setSearch({type:"2",data:t}),this.getMovieList()},goMovie:function(t){this.$router.push({path:"detail",query:{movie:t}})}})},Mt=St,Lt=(n("391e"),Object(o["a"])(Mt,at,rt,!1,null,"77eb1831",null));Lt.options.__file="Home.vue";var Rt=Lt.exports,At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-wrapper"},[n("Login",{class:["1"===t.loginType?"show":"","2"===t.loginType?"hide":""],on:{"close-login":t.closeLogin,"login-success":t.loginSuccess}}),n("h1",{staticClass:"movie-title"},[t._v(t._s(t.detailData.movie.title))]),n("div",{staticClass:"movie-info"},[n("div",{staticClass:"movie-poster background-image",style:{backgroundImage:"url("+t.detailData.movie.poster+")"}}),n("div",{staticClass:"movie-detail"},[n("div",{staticClass:"detail-item"},[n("div",{staticClass:"title"},[t._v("导演：")]),n("div",[t._v(t._s(t.detailData.movie.director))])]),n("div",{staticClass:"detail-item"},[n("div",{staticClass:"title"},[t._v("主演：")]),n("div",[t._v(t._s(t.detailData.movie.actor))])]),n("div",{staticClass:"detail-item"},[n("div",{staticClass:"title"},[t._v("类型：")]),n("div",[t._v(t._s(t.detailData.movie.type))])]),n("div",{staticClass:"detail-item"},[n("div",{staticClass:"title"},[t._v("制片国家/地区：")]),n("div",[t._v(t._s(t.detailData.movie.country))])]),n("div",{staticClass:"detail-item"},[n("div",{staticClass:"title"},[t._v("上映日期：")]),n("div",[t._v(t._s(t.detailData.movie.showtime))])]),n("div",{staticClass:"detail-item"},[n("div",{staticClass:"title"},[t._v("片长：")]),n("div",[t._v(t._s(t.detailData.movie.duration))])]),n("div",{staticClass:"detail-item"},[n("div",{staticClass:"title"},[t._v("评分：")]),n("div",[t._v(t._s(t.detailData.movie.score))])])])]),n("div",{staticClass:"movie-desc"},[n("div",{staticClass:"title"},[t._v("剧情简介：")]),n("div",[t._v(t._s(t.detailData.movie.desc))])]),t.userInfo?n("div",{staticClass:"movie-download"},[n("div",{staticClass:"title"},[t._v("资源下载："),n("div",{staticClass:"tip word-button",on:{click:function(e){t.$router.push("tip")}}},[n("span",{staticClass:"iconfont icon-question"}),t._v("下载遇到问题？")])]),n("div",{staticClass:"download-btn"},t._l(t.detailData.download,function(e,a){return n("a",{key:a,staticClass:"button small-button",attrs:{href:e.link,target:"_blank",title:"点击下载"}},[t._v(t._s(e.name))])}))]):t._e(),n("div",{staticClass:"movie-form border"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.commentInput,expression:"commentInput"}],staticClass:"input small-input",attrs:{type:"text",placeholder:"不超过100字"},domProps:{value:t.commentInput},on:{input:function(e){e.target.composing||(t.commentInput=e.target.value)}}}),n("div",{staticClass:"button small-button",on:{click:t.commentOpt}},[t._v("吐槽一下")])]),t.commentData.list.length>0?n("div",{staticClass:"movie-comment"},t._l(t.commentData.list,function(e,a){return n("div",{key:a,staticClass:"comment"},[n("div",{staticClass:"user"},[n("span",{staticClass:"name"},[t._v(t._s(e.user.nickname))]),n("span",{staticClass:"time"},[t._v(t._s(t.formatTime(e.createdAt)))]),t.userInfo&&t.userInfo.userid===e.user.objectId?n("div",{staticClass:"word-button",on:{click:function(n){t.delCommentOpt(e)}}},[t._v("删除")]):t._e()]),n("div",{staticClass:"detail"},[t._v(t._s(e.comment))])])})):t._e(),t.commentData.total<=0?n("div",{staticClass:"movie-tip"},[t._v("一起来吐槽 ~")]):t.commentData.total>0&&t.commentData.isEnding?n("div",{staticClass:"movie-tip"},[t._v("到底啦 ~")]):t._e()],1)},Nt=[],Ht={name:"Detail",components:{Login:ft},data:function(){return{loginType:"",commentInput:""}},computed:Object(it["a"])({},Object(l["e"])({detailData:function(t){return t.detail.detailData},commentData:function(t){return t.detail.commentData},userInfo:function(t){return t.userInfo}})),created:function(){this.getDetailData(this.$route.query.movieId),this.getCommonData({movieId:this.$route.query.movieId})},mounted:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,this.$nextTick(function(){document.querySelector("#app").addEventListener("scroll",function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a.target.offsetHeight+a.target.scrollTop+100>=a.target.scrollHeight&&!e.commentData.isEnding&&e.getCommonData({movieId:n.$route.query.movieId,pageDown:!0});case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())}),t.next=4,this.getDetailData(this.$route.query.movieId);case 4:return t.next=6,this.getCommonData({movieId:this.$route.query.movieId});case 6:document.querySelector("title").innerHTML="（*^_^*） ".concat(this.detailData.movie.title);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:Object(it["a"])({},Object(l["c"])({getDetailData:"detail/getDetailData",getDownload:"detail/getDownload",getCommonData:"detail/getCommonData",commentMovie:"detail/commentMovie",commentDelte:"detail/commentDelte"}),{formatTime:b,closeLogin:function(){this.loginType="2"},loginSuccess:function(){this.getDownload(this.$route.query.movieId),this.getCommonData({movieId:this.$route.query.movieId})},commentOpt:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.userInfo){t.next=4;break}return this.$toast({title:"请先登录"}),this.loginType="1",t.abrupt("return");case 4:if(e=this.commentInput.replace(/(^\s*)|(\s*$)/,""),""!==e){t.next=7;break}return t.abrupt("return");case 7:if(!(e.length>100)){t.next=10;break}return this.$toast({title:"留言不超过100字"}),t.abrupt("return");case 10:return t.next=12,this.commentMovie({movieId:this.$route.query.movieId,comment:e});case 12:n=t.sent,n&&(this.commentInput="");case 14:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),delCommentOpt:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(e){var n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=window.confirm("确认删除该条评论？"),!n){t.next=6;break}return t.next=4,this.commentDelte({movieId:this.$route.query.movieId,commentId:e.objectId});case 4:a=t.sent,a&&this.$toast({title:"删除成功"});case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()})},qt=Ht,Et=(n("4858"),Object(o["a"])(qt,At,Nt,!1,null,"1fae1cf2",null));Et.options.__file="Detail.vue";var Ut=Et.exports,Xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-wrapper"},[n("div",{staticClass:"publish-title"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.movie.title,expression:"movie.title"}],staticClass:"input small-input",attrs:{type:"text",placeholder:"影视名称（必填）"},domProps:{value:t.movie.title},on:{input:function(e){e.target.composing||t.$set(t.movie,"title",e.target.value)}}}),n("div",{staticClass:"button small-button",on:{click:t.saveOpt}},[t._v(t._s("1"===t.pageType?"发布":"更新"))])]),n("div",{staticClass:"publish-info"},[n("div",{staticClass:"publish-poster background-image",style:{backgroundImage:"url("+t.movie.poster+")"}}),n("div",{staticClass:"publish-detail"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.movie.director,expression:"movie.director"}],staticClass:"input small-input detail-input",attrs:{type:"text",placeholder:"导演（必填）"},domProps:{value:t.movie.director},on:{input:function(e){e.target.composing||t.$set(t.movie,"director",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.movie.actor,expression:"movie.actor"}],staticClass:"input small-input detail-input",attrs:{type:"text",placeholder:"主演（必填）"},domProps:{value:t.movie.actor},on:{input:function(e){e.target.composing||t.$set(t.movie,"actor",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.movie.type,expression:"movie.type"}],staticClass:"input small-input detail-input",attrs:{type:"text",placeholder:"类型（必填）"},domProps:{value:t.movie.type},on:{input:function(e){e.target.composing||t.$set(t.movie,"type",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.movie.country,expression:"movie.country"}],staticClass:"input small-input detail-input",attrs:{type:"text",placeholder:"制片国家/地区（必填）"},domProps:{value:t.movie.country},on:{input:function(e){e.target.composing||t.$set(t.movie,"country",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.movie.duration,expression:"movie.duration"}],staticClass:"input small-input detail-input",attrs:{type:"text",placeholder:"片长（必填）"},domProps:{value:t.movie.duration},on:{input:function(e){e.target.composing||t.$set(t.movie,"duration",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.movie.showtime,expression:"movie.showtime"}],staticClass:"input small-input detail-input",attrs:{type:"text",placeholder:"上映日期（必填）"},domProps:{value:t.movie.showtime},on:{input:function(e){e.target.composing||t.$set(t.movie,"showtime",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.movie.score,expression:"movie.score"}],staticClass:"input small-input detail-input",attrs:{type:"text",placeholder:"评分（必填）"},domProps:{value:t.movie.score},on:{input:function(e){e.target.composing||t.$set(t.movie,"score",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.movie.poster,expression:"movie.poster"}],staticClass:"input small-input detail-input",attrs:{type:"text",placeholder:"海报（必填）"},domProps:{value:t.movie.poster},on:{input:function(e){e.target.composing||t.$set(t.movie,"poster",e.target.value)}}})])]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.movie.desc,expression:"movie.desc"}],staticClass:"input small-input publish-desc",attrs:{cols:"30",rows:"7",placeholder:"简介（必填）"},domProps:{value:t.movie.desc},on:{input:function(e){e.target.composing||t.$set(t.movie,"desc",e.target.value)}}}),n("div",{staticClass:"publish-download"},t._l(t.movie.download,function(e,a){return n("div",{key:a,staticClass:"download-item"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"item.type"}],staticClass:"select small-select",attrs:{name:a},on:{change:[function(n){var a=Array.prototype.filter.call(n.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(e,"type",n.target.multiple?a:a[0])},function(n){t.changeOpt(e)}]}},[n("option",{attrs:{value:""}},[t._v("迅雷链接")]),n("option",{attrs:{value:"1"}},[t._v("网盘链接")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"item.name"}],staticClass:"input small-input download-name",attrs:{type:"text",placeholder:"资源描述（选填）"},domProps:{value:e.name},on:{input:function(n){n.target.composing||t.$set(e,"name",n.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.link,expression:"item.link"}],staticClass:"input small-input download-link",attrs:{type:"text",placeholder:"资源网站或链接（必填）"},domProps:{value:e.link},on:{input:function(n){n.target.composing||t.$set(e,"link",n.target.value)}}}),"2"===e.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"item.code"}],staticClass:"input small-input download-code",attrs:{type:"text",placeholder:"提取码"},domProps:{value:e.code},on:{input:function(n){n.target.composing||t.$set(e,"code",n.target.value)}}}):t._e(),a>0?n("div",{staticClass:"button small-button",on:{click:function(e){t.deleteOpt(a)}}},[n("span",{staticClass:"iconfont icon-minus"})]):t._e(),n("div",{staticClass:"button small-button",on:{click:t.addOpt}},[n("span",{staticClass:"iconfont icon-plus"})])])}))])},zt=[],Bt=(n("b54a"),{name:"Publish",data:function(){return{pageType:"1",movie:{title:"",poster:"",director:"",actor:"",type:"",country:"",duration:"",showtime:"",score:"",desc:"",download:[{type:"",name:"",link:"",code:""}]}}},computed:Object(l["e"])({userInfo:function(t){return t.userInfo},detailData:function(t){return t.detail.detailData}}),created:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$route.query.movieId){t.next=11;break}return this.pageType="2",document.querySelector("title").innerHTML="（*^_^*） 编辑",t.next=5,this.getDetailData(this.$route.query.movieId);case 5:e=JSON.parse(JSON.stringify(this.detailData)),this.movie=e.movie,e.download.map(function(t){return t.type=t.type||"",t.code=t.code||"",t}),this.movie.download=e.download,t.next=13;break;case 11:this.pageType="1",document.querySelector("title").innerHTML="（*^_^*） 发布";case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:Object(it["a"])({},Object(l["c"])({getDetailData:"detail/getDetailData",addMovie:"publish/addMovie",updateMovie:"publish/updateMovie"}),{deleteOpt:function(t){this.movie.download.splice(t,1)},addOpt:function(){this.movie.download.push({type:"",name:"",link:"",code:""})},changeOpt:function(t){t.name="",t.link="",t.code=""},saveOpt:function(){var t=Object(y["a"])(regeneratorRuntime.mark(function t(){var e,n,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.userInfo){t.next=3;break}return this.$toast({title:"请先登录"}),t.abrupt("return");case 3:if(""!==this.movie.title.replace(/\s/gi,"")){t.next=6;break}return this.$toast({title:"请填写电影名称"}),t.abrupt("return");case 6:if(""!==this.movie.director.replace(/\s/gi,"")){t.next=9;break}return this.$toast({title:"请填写电影导演"}),t.abrupt("return");case 9:if(""!==this.movie.actor.replace(/\s/gi,"")){t.next=12;break}return this.$toast({title:"请填写电影主演"}),t.abrupt("return");case 12:if(""!==this.movie.type.replace(/\s/gi,"")){t.next=15;break}return this.$toast({title:"请填写电影类型"}),t.abrupt("return");case 15:if(""!==this.movie.country.replace(/\s/gi,"")){t.next=18;break}return this.$toast({title:"请填写电影制片国家/地区"}),t.abrupt("return");case 18:if(""!==this.movie.duration.replace(/\s/gi,"")){t.next=21;break}return this.$toast({title:"请填写电影片长"}),t.abrupt("return");case 21:if(""!==this.movie.showtime.replace(/\s/gi,"")){t.next=24;break}return this.$toast({title:"请填写电影上映时间"}),t.abrupt("return");case 24:if(""!==this.movie.score.replace(/\s/gi,"")){t.next=27;break}return this.$toast({title:"请填写电影评分"}),t.abrupt("return");case 27:if(""!==this.movie.poster.replace(/\s/gi,"")){t.next=30;break}return this.$toast({title:"请添加海报"}),t.abrupt("return");case 30:if(""!==this.movie.desc.replace(/\s/gi,"")){t.next=33;break}return this.$toast({title:"请填写电影简介"}),t.abrupt("return");case 33:e=0;case 34:if(!(e<this.movie.download.length)){t.next=42;break}if(n=this.movie.download[e],""!==n.link.replace(/\s/gi,"")){t.next=39;break}return this.$toast({title:"请填写完整的资源网站或链接"}),t.abrupt("return");case 39:e++,t.next=34;break;case 42:if(a="1"===this.pageType?"发布":"更新",r=null,"1"!==this.pageType){t.next=50;break}return t.next=47,this.addMovie(this.movie);case 47:r=t.sent,t.next=54;break;case 50:if("2"!==this.pageType){t.next=54;break}return t.next=53,this.updateMovie(this.movie);case 53:r=t.sent;case 54:r&&(this.$toast({title:"".concat(a,"成功")}),this.$router.go(-1));case 55:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()})}),Wt=Bt,Jt=(n("9805"),Object(o["a"])(Wt,Xt,zt,!1,null,"3e4365f8",null));Jt.options.__file="Publish.vue";var Ft=Jt.exports,Gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-wrapper"},[n("div",{staticClass:"tip-title"},[t._v("如果遇到迅雷下载因版权无法下载的情况，请参考以下建议：")]),n("div",{staticClass:"tip-detail"},[t._v("1、若是迅雷链接，请先转换为真实链接地址；")]),n("div",{staticClass:"tip-detail"},[t._v("2、可以复制真实链接地址后，尝试使用其他下载软件，比如IDM、μTorrent、比特彗星、Vuze等等；")]),n("div",{staticClass:"tip-detail"},[t._v("3、可以复制真实链接地址后，使用百度网盘的离线下载功能，参考下面步骤图。")]),n("div",{staticClass:"tip-form border"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.link,expression:"link"}],staticClass:"input small-input",attrs:{type:"text",placeholder:"请输入迅雷链接"},domProps:{value:t.link},on:{input:function(e){e.target.composing||(t.link=e.target.value)}}}),n("div",{staticClass:"button small-button",on:{click:t.transformOpt}},[t._v("转换")])]),n("div",{staticClass:"tip-form border"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.realLink,expression:"realLink"}],staticClass:"input small-input",attrs:{type:"text",disabled:"",placeholder:"真实链接地址"},domProps:{value:t.realLink},on:{input:function(e){e.target.composing||(t.realLink=e.target.value)}}}),n("div",{staticClass:"button small-button copy-button",attrs:{"data-clipboard-text":t.realLink}},[t._v("复制")])]),t._m(0)])},Kt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tip-img"},[a("img",{attrs:{src:n("a412")}}),a("img",{attrs:{src:n("67e3")}}),a("img",{attrs:{src:n("08d1")}}),a("img",{attrs:{src:n("7cdd")}})])}],Vt=n("b311"),Yt=n.n(Vt),Qt=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);function Zt(t){var e,n,a,r,i,o,s;o=t.length,i=0,s="";while(i<o){do{e=Qt[255&t.charCodeAt(i++)]}while(i<o&&-1==e);if(-1==e)break;do{n=Qt[255&t.charCodeAt(i++)]}while(i<o&&-1==n);if(-1==n)break;s+=String.fromCharCode(e<<2|(48&n)>>4);do{if(a=255&t.charCodeAt(i++),61==a)return s;a=Qt[a]}while(i<o&&-1==a);if(-1==a)break;s+=String.fromCharCode((15&n)<<4|(60&a)>>2);do{if(r=255&t.charCodeAt(i++),61==r)return s;r=Qt[r]}while(i<o&&-1==r);if(-1==r)break;s+=String.fromCharCode((3&a)<<6|r)}return s}function te(t){var e,n,a,r,i,o;e="",a=t.length,n=0;while(n<a)switch(r=t.charCodeAt(n++),r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=t.charAt(n-1);break;case 12:case 13:i=t.charCodeAt(n++),e+=String.fromCharCode((31&r)<<6|63&i);break;case 14:i=t.charCodeAt(n++),o=t.charCodeAt(n++),e+=String.fromCharCode((15&r)<<12|(63&i)<<6|(63&o)<<0);break}return e}var ee={name:"Tip",data:function(){return{link:"",realLink:""}},mounted:function(){var t=this;document.querySelector("title").innerHTML="（*^_^*） 下载提示";var e=new Yt.a(".copy-button");e.on("success",function(e){t.$toast({title:"复制成功"}),e.clearSelection()}),e.on("error",function(){t.$toast({title:"复制失败"})})},methods:{transformOpt:function(){var t=this.link.replace(/(^\s*)|(\s*$)/g,"");t.indexOf("thunder://")<0||(t=t.replace(/thunder:\/\//,""),t&&(t=te(Zt(t)),this.realLink=t.substr(2,t.length-4)))}}},ne=ee,ae=(n("f327"),Object(o["a"])(ne,Gt,Kt,!1,null,"4b776171",null));ae.options.__file="Tip.vue";var re=ae.exports;a["a"].use(nt["a"]);var ie=new nt["a"]({routes:[{path:"/",name:"home",component:Rt},{path:"/Detail",name:"Detail",component:Ut},{path:"/Publish",name:"Publish",component:Ft},{path:"/Tip",name:"Tip",component:re}]});n("40f5"),n("f266"),n("ee40"),n("be35");a["a"].config.productionTip=!1,a["a"].prototype.$toast=m,new a["a"]({store:et,router:ie,render:function(t){return t(u)}}).$mount("#app")},"67e3":function(t,e,n){t.exports=n.p+"img/step2.5eb8a161.jpg"},"7cdd":function(t,e,n){t.exports=n.p+"img/step4.ea32ce7f.jpg"},8501:function(t,e,n){},"8eba":function(t,e,n){"use strict";var a=n("4fad"),r=n.n(a);r.a},"916d":function(t,e,n){},9805:function(t,e,n){"use strict";var a=n("c389"),r=n.n(a);r.a},a412:function(t,e,n){t.exports=n.p+"img/step1.be5fcdd9.jpg"},ab39:function(t,e,n){"use strict";var a=n("8501"),r=n.n(a);r.a},adc0:function(t,e,n){},be35:function(t,e,n){},c389:function(t,e,n){},ddb4:function(t,e,n){"use strict";var a=n("916d"),r=n.n(a);r.a},ee40:function(t,e,n){},f266:function(t,e,n){},f327:function(t,e,n){"use strict";var a=n("adc0"),r=n.n(a);r.a}});
//# sourceMappingURL=app.4a31c4df.js.map